<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Minify JS Code</title>

  <link rel='stylesheet prefetch' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>
  <style>
  * {
    border-radius: 0 !important;
  }
  h1, textarea, button, pre {
    margin-top: 10px;
  }
  pre {
    overflow-x: auto;
  }
  </style>

</head>

<body>
  <div class="container-fluid">
  <div class="row">
    <div class="col-md-12">
      <h1>Minify JS Code</h1>
      <textarea id="input" class="form-control" rows="10" placeholder="Input..."></textarea>
      <button id="prettify" type="button" class="btn btn-primary btn-lg btn-block">⤷ MINIFY JS CODE ↴</button>
      <!--<textarea id="output" class="form-control" rows="10" placeholder="Output..." readonly></textarea>-->
      <pre id="output" contenteditable="true"><code></code></pre>
    </div>
  </div>

  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g=" crossorigin="anonymous"></script>
  <script src="js/uglifyjs.js"></script>
  <script>
  !function ($) {
    $(function(){

      var $window = $(window);

      // window.prettyPrint && prettyPrint();

      $('#prettify').click(function(e){
        e.preventDefault();
        var input = $('#input').val();
        var ast = UglifyJS.parse(input);
        ast.figure_out_scope();
        var compressor = UglifyJS.Compressor();
        ast = ast.transform(compressor);
        var minified = ast.print_to_string();
        $('#output code').text(minified);
        return false;
      });

    });
  }(window.jQuery);
  </script>

</body>
</html>
